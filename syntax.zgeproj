<?xml version="1.0" encoding="iso-8859-1" ?>
<ZApplication Name="App" Caption="Sublime Syntax" FileVersion="2" AndroidPackageName="com.txori.ZgeSublime">
  <OnLoaded>
    <ZLibrary Comment="ZLibrary test" HasInitializer="1">
      <Source>
<![CDATA[//
// storage.modifier
const int constInt = 16;
private int privateInt = 32;

// ZLibrary function
void functionVoid() {}
float functionFloat() { return 3.14; }
int functionInt() { return 64; }
string functionString() { return "hello"; }
model functionModel() { return ModelSphere; }
byte functionByte() { return 1; }
mat4 functionMat4() {
  mat4 m;
  m[0,0] = 1;
  m[1,1] = 1;
  m[2,2] = 1;
  m[3,3] = 1;
  return m;
}
vec2 functionVec2(float x, float y) {
  vec2 v;
  v.X = x;
  v.Y = y;
  return v;
}

class Rectangle {
  int width = 10;
  int height = this.width;

  int area() {
    return this.width * this.height;
  }

  void info() {
    trace("Rectangle; area=" + intToStr(this.area()));
  }
}

/*
 This is a multiline comment float varFloat debugFunction() !?
*/
void debugFunction(float varFloat, int varInt, string varString, model varModel, byte varByte, mat4 varMat4, vec2 varVec2, vec3 varVec3, vec4 varVec4, xptr varXptr) {
  float varFloatBis = varFloat;
  int varIntBis = varInt;
  string varStringBis = varString;
  model varModelBis = varModel;
  byte varByteBis = varByte;
  mat4 varMat4Bis = functionMat4();
  vec2 varVec2Bis = functionVec2(1, 1.5);
  vec3 varVec3Bis = varVec3;
  vec4 varVec4Bis = varVec4;
  xptr varXptrBis = varXptr;
}]]>
      </Source>
    </ZLibrary>
    <ZLibrary Comment="ZGE" HasInitializer="1">
      <Source>
<![CDATA[//
// defining constants
const int FALSE = 0, TRUE = 1;
const float PI2 = PI * 2;

// usage of constants
if(x > 22) flag = FALSE;
a = sin(CurrentModel.Rotation.Z * PI2);

CurrentModel.Position = Player.Position;
CurrentModel.Velocity.X = cos(Player.Rotation.Z * PI * 2) * BULLET_SPEED;
CurrentModel.Velocity.Y = sin(Player.Rotation.Z * PI * 2) * BULLET_SPEED;

if(PlayerScore > 0 && PlayerScore % 5000 == 0)
  PlayerLives += 1;

if( (App.Time > 30) && (PlayerLives < 2) ) {
  Difficulty *= 1.2;
  Speed *= 1.2;
}

if(CurrentModel.Position.Y > -30) {
  CurrentModel.Scale = 1.2 + sin(App.Time);
  ObjectColor.Color.R = rnd();
} else
  @RemoveModel();

switch(status) {
  case 0 :
  case 1 :
  case 2 :
    // when i is 0, 1 or 2
    doSomething();
    break;
  case 3 :
    // when i is 3
    doSomethingElse();
    break;
  default :
    //The default case when i is none of the above
}

while(i < 42) {
   if(i == 10)
     break;  //exit loop
   i++;
}

float max(float v1, float v2) {
  return v1 >= v2 ? v1 : v2;
}

float max3(float v1, float v2, float v3) {
  return max(max(v1, v2), v3);
}

// Separate r,g,b from color and return back to caller.
// Notice the "ref" word in front of the arguments that are passed by reference.
void splitColor(int color,ref int r, ref int g, ref int b) {
  r = color >> 16;
  g = color >> 8 & 0xFF;
  b = color & 0xFF;
}

// call this function
int r,g,b;
splitColor(0xff8020, r, g, b); // r == 255, g == 128, b == 32
]]>
      </Source>
    </ZLibrary>
    <SpawnModel Model="ModelSphere"/>
  </OnLoaded>
  <OnUpdate>
    <ZExpression Comment="Single line ZExpression" Expression="int test = 6;"/>
    <ZExpression Comment="Multi line ZExpression">
      <Expression>
<![CDATA[//
// storage.type
float varFloat = 3.14f;
int varInt = 64;
string varString = "hello string = 3";
model m = ModelSphere;
byte varByte = 1;
mat4 varMat4;
vec2 varVec2;
vec3 varVec3;
vec4 varVec4 = vector4(1,2,3,4);
xptr varXptr;

varVec3.X = 0;
varVec3.Y += 0.5;
//varVec3.Z *= 1;

// if else case break
if (App.RenderPasses > 1)
{
  while(CameraGame.Position.X == 0) {
    switch (App.CurrentRenderPass)
    {
      case 0: CameraGame.Position.X --; break; // Comment at the end of the line
      case 1: CameraGame.Position.X += 1; break;
    }
  }
} else CameraGame.Position.X = 0;]]>
      </Expression>
    </ZExpression>
  </OnUpdate>
  <Content>
    <Font Name="DinaFont" Bitmap="BitmapTest" FirstChar="32" CharPixelWidth="8" CharPixelHeight="16"/>
    <Bitmap Name="BitmapTest" Width="32" Height="32" Filter="1">
      <Producers>
        <BitmapFromFile Comment="Imported from bitmap.png" DataWidth="32" DataHeight="32">
          <BitmapFile>
<![CDATA[789CB5D0510980301485E15BC2008B6009DF8C21C6D018620C9F4C61040398C20B8331B639C7760EFCCF1F8763E436C50D72269B640F5A64B551F1763F8F97FB75F8263315FFF5EB3E77789D5F8E67FCF6E5191F851F32926EB178D207E2B18FC57D1FF879B9DF885B9FB45CBBA4A7E25F3E0A4FFA403CF6B178E0C371DF67E0CE27E18F74545CA3E2B18FC5031F8EFB3E03773E09B73E0FD7A878E0C371DF67E0DA0BA2DAFB9A]]>
          </BitmapFile>
        </BitmapFromFile>
        <BitmapExpression>
          <Expression>
<![CDATA[//X,Y : current coordinate (0..1)
//Pixel : current color (rgb)
//Sample expression: Pixel.R=abs(sin(X*16));
Pixel.G = X;
//Pixel.R = Y;]]>
          </Expression>
        </BitmapExpression>
      </Producers>
    </Bitmap>
    <Material Name="MaterialTest">
      <Textures>
        <MaterialTexture Texture="BitmapTest"/>
      </Textures>
    </Material>
    <Mesh Name="MeshSphere">
      <Producers>
        <MeshImport Comment="Bug: no gray color if CDATA length bigger than 16383" HasVertexColors="1">
          <MeshData>
<![CDATA[789CED998F539357BAC75FD342A1EDC6E2E2C49575A1A1155D1253BA17D396B670B7F547B36B9BB26DAC6B598DB4A260845A44635B135B1B45A06004C4168141D635DA34ADD7D45F5D83366ACAB59A4D58400B0BD7852123B7D46C2D084ADF9B4FF7DE3FA17333B37967CE3367CE8FEFF7FBCC79CF7B9EF3BC5BEF1484B763041ED7528DE03AEB144F09823973A9C69C79D669CA144D82A0310BE61FD7FE93E5C7B3FFC7552DC4177FF256B5B0A878C31BD5C28DE255C66A21AAA46643B550BC21AEA45A4837068AAB8547DE9819B2ABDFFACBEBD582D3F475C8DEF5B631D4B2706BD1FA6AE1558B2734F299ED251BAB85BF97AEDE542D3C5056F566B530A9BC7373B5F05AF9AC2DD8C27768A97D97DED26D8C549732AB7207089632D0A694833CA71C96CB6530CACA601F2E4549FE7654EDB6A070FB56D43EFB36CA45135E0866ADE4565EDE1B5AC99A5563255AC9F1D5BDEBB492CE82270BB592C36B1F5DA395A4ADBBB63A644BF2566925959B5C795A89DC341AB2AE77A4A1F627B68FE56B25AF95EF376825E95513455AC9ABBB7A8BB592819A5946ADA47EF7276F69256FD63DFB36B6D3424B5219BD924A462EB1322BBA0684602D6831752067D5C152B71BC6A9B5B09FDB8592D355A84AAA406174296AEBB6A25C34E18560564525BC3CCBA88A3AF3F2CE75AAA8C37F58BF461575592FCD53454D5F59B94215B5A82071992AEAD7AFF5BD1C1AB36160A92A6AE7E64743F5A277BB72545149E58797ABA2F456C72BAAA8DBBB0FAC56459DAC2F2A5445BDDEF497F5AA28C9BEAA375551CFB514BE839DB38396CA2A7A17D73252FB01B316358290D20CDAB97D204F6F8125711F8C7D4DB017ED4549B00E553B76A1706D056A3B2D28174D7821985363DFD38E95A4C6163CBF606D6AECD8EF1E59991A2B7F69DAB2D4D85339B397A4C6BEFF4AD30BA9B1256B6CCFA7C6C6AE5FA64D8DBD73F3C5909DBA2D989D1A3B58E9D4A5C6CEAA1B5D9A1A5BDE6859911A7BE98F33F353638F1EDCB92E3556F6D1863752632F3AB66FC5AEADA0E5720DBDC6BD8C8C696196C60682D40E5A9A03E426072CBA8F7E603C047BC77E940C36A1EAFC1E141EDB89DAE852948B26BC10CC19D2A279BDC51952F3FC99F919D23F3DA35E9E213DFFECDAC519D2C32FCED0664853FE60D164483BF37AE76748F3D72D9C97217DEB2D6FC81EDCBE6E6186B474976C5186F4E85EEBEF32A4EDFB6D4B33A4151FDDF76A8674CF91A2C20CE99963AB376548FB4ED4BE8BADACA2E59BF7E9D5B530D2F021B3028741A8380A9AEA04C8474FC092741C46A313F6AB0E94EC3C802A4F230A2FD7A036A90CE5A2092F047376FC95C77AD765C7273CFEC8CAEC787FA6F9F7D9F17DF392B5D9F1B1CF9A1764C7DFF152202B3B7E5D6EDDE3D9F14385C71ECB8EBFFDE6928CEC78C58EE227B3E385DDDF3C951D2FD957F39BECF8CFED492F66C7F77EAA5E1E6A39B57E4D76FCB533AB8CD9F1ABCFEEB66077ECA2C5D3486FEF4146E61F61D67D9F8150761AB4FD6E90179C8525EF7318652ED84DC750D2ED4095E98F283CBF07B5491528174D7821987313061E9A28CA4D78F161CB8ADC849AB9492FE626989F98FF4C6E42FBFC9599B9098F67F7A873139E5B36FC706E82D5F0C543B909EFBCB9252D37A1B66C727A6EC2BFBF9F9D919B70FB4F714FE7262C3C32FE6C6EC2E153B6A5B9095F9D3BB03A3761C385928DB909D9974AB76117D7D2A26BA137EA13460E9F6496DD0DC2F536D0365F0479EE2558E2BE8451EE817D4F2B4A8E7F8AAADE832834EE45ADA412E5A2092F04734EB22DE5C9C29CE4A7664F5B96932C9993ACCD493E991EF8754EF2835957D539C9FFF5DB8DAA9CE48D4B4767E724BF5A604DC9499EF2E6B25939C983E53A454EF282BD2FFC2A27F9FD0FA73D9193FCC289F9CFE4247F7776EDE29CE4B84BD2BC50CB5F6B36E4246FEDCADF8E0DD6D1B2F300BDC73F65E4E019661DBA0082CD0F5A5327C8862E58623A60DCE6857D860725B23FA3AADB81C2C126D49EAE42B968C20BC1AC543C9AB8DFA054DC4A1A5DAA542867D6FC46A9689E33ED09A5E2EEC7A2D3948ADB0B2EA62815A38BCFDFAF54AC5A9D92A8547CF8464C925231FDBDE50F2815B14DB10AA5C2F7F189B94AC51557DCD34A45ED05EBEF948AAA0EC72B4AC59A1E4F895271AD4F5D8AD57E408BE1437A874F3272DE17CC1AF183D0F81568A3BD2077F5C1F2C8DF604CEB827DEC224A06CFA02AFF080A635A50BBC48A72D1841782B935FD90ECD135ADE9953F9BBDA435FD9789E605ADE90B665D55B7A65BFFADEF97ADE9EF3F154C6A4D6F7FE1B5E9ADE94D790DB2D6F4E7DEA89AD69AAEACCC9CD19AFE76B3E9C1D6F43D47A2D35AD3BF74AFCC6C4DB7F8666843083D952B42C8FD7125ADE98581E1526CD15E5AAE3AE8DDD3CAC8B18BCC325F01A1F52A68858320EB03B0BC3700A3B417F6C4BFA264860755A66328ECD88FDA73BB502E9AF02274FA67DD1737962F644DF9A9532764DDF5B36F9E12B28EC95FF89590D5A6323D28649DCDBC3E5DC89A9A7D57BC9015B7323A4EC81237DD3545C8FA45954426641D6AF1240A59834763154256D217D919A1B99DB2454256CADF0F2F17B2EE182A5A1FB2DF54EEC02E6AA42570985EBB9B91237E66A9FB4098088076F36B90C78661B93904E3E401D8CD575072E802AAEEFB0C851A1B6AA36B501E8A64425E0866BFA6E49E6BABFD1AEB4F9A5EF06BDA7F1AC8F26B24BFD8A8F26BFE9C1A4CF26B2C8F5F9EEAD79C79AE4EEAD7B85E29BCC7AF39B969F3BD7ECDB5AAE3717E8D79FFF5E97ECD91131753FC9AFFBCD0A3F66B12BB2D1ABFE6FE40E232BF66C5F540B15F537B435686ED6BA2C5E8A457EE61645A17B3260F80307F18B42DDF825C750396BC208C33AFC12EED45C936AF5FF359AACC85C26587503BB516E5A2092F04B35C37142D5D2DD7CD880D66CB757B27173F29D7A9A6EB1472DDEBB33267C8757F7FF4789C5CD7BB4875B75C67CF1D8C96EBDED924C4C875553B0B7F22D7DDFE934426D78D7DB6FC01B9EEECA5C9E972DD27BDEB16CA75A9FFDD9523D79DBA612C96EB7E3E6629C3A634D3527194DEEB6D8C6CFC8A59130110AAFE019A380AF2B43158BCDFC1387F18F6D6AB2839E04755D969144AEDA80DD6A25C34E18560F6E937DD91B7CAA73F19657BDEA7CFBFB7EE719F5E231B9DEDD37FF7E06BD37DFA7E759DD4A72FFA6D67B44FDFB362E31D3EFDEF37D5DDE9D3FFC4AABADBA7FFB9EDAE789FFEF0A9F3F7FBF4D1BEE1877DFA95577BE7FBF48F7DD3F7B24F7FEFCD99C53E7DE9EDCB65D8C47DB4241DA737EE4B463EF23766DD1C02C1FB1D6879B740DE76DBA75FB269D6188C7941D8DF1B40494C07AAF23E47A1EEA31FD4EE46B968C20BC1EC31CC9E349AE73194DC7151EB31CCBB7B4986C7F0D2D465B33C86850F544DF318CAE76EBED763D8F49BBA3B3D86E757CC9EE4313CB1E93989C7A0B70A311EC3DF6C774DF118AEB862923C861DFE2D691EC323FDDE791EC333C1475FF6189E1EFFFA758FA1F3FB29E5D873FB68519D082107375F64E4682FB36E7E0D82380ADAC71320777C0F4BDE2D18B77C0B7BE1204A9A3A51B5DF8DC234076A63EA502E9AF04230078CA1AB4D5EC0F8BC649936604C8B3DF658C0F887786B4AC0F85A72832C60EC4B2FBC276014351BEF0818EF59210801A36AD3EC490163B975303A60CC3C181D173016B6A624068C8BDABF782860BC7F60E1BC10DA3F0696068CFA5B7F793D34579C538E9DDE42CBD113F4CEBDC4C8AE3E668D0D83306D0CB48EEF41164558B6DD86B1EA06ECFA004A0C5DA85A7016854D0ED466D5A15C34E185609659F04566C11799055F64167C9159F04566C11799055F64167C9159F04566C11799055F64167C9159F04566C197105AC81799055F427343BE60A7B7D072F404BD732F31B2AB8F5963C3204C1B03ADE37B904511966DB761ACBA01BB3E80124317AA169C45619303B5597528174D782198D556DE31B595774C6DE51D535B79C7D456DE31B595774C6DE51D535B79C7D456DE31B595774C6DE51D535B79C7D456DE31B595774C6DE51D535B79C7D456DE31ECB97DB4A84E849043EF1823477B9975F36B10C451D03E9E00B9E37B58F26EC1B8E55BD80B0751D2D489AAFD6E14A639501B538772D18417A173BF81BDAF6C60EF2B1BD8FBCA06F6BEB281BDAF6C60EF2B1BD8FBCA06F6BEB281BDAF6C60EF2B1BD8FBCA06F6BEB281BDAF6C60EF2B1BD8FBCA06F6BEB281BD8F4DDC474BD2717AE3BE6464E8646F60EF83E0FD0EB4BC5B206FBBAD6C60EFC3981784FDBD0194C474A02AEF7314EA3EFA41ED6E9487CEFD06F67E8F8D6F728F8D6F728F8D6F728F8D6F728F8D6F728F8D6F728F8D6F728F8D6F728F8D6F728F8D6F728F8D6F728F8D6F728F8D6F728F8D6F728F8D6F728F8D6F728F8D6F3236A599968AA3F45E6F6364E357CC9A088050F50FD0C45190A78DC1E2FD0EC6F9C3B0B75E45C9013FAACA4EA3506A476DB016E5A2092F04B3C2C959A97072562A9C9C950A2767A5C2C959A97072562A9C9C950A2767A5C2C959A97072562A9C9C950A2767A5C2C959A97072562A9C9C950A2767A5C2C95989ED6BA2C5E8A457EE61645A17B3260F80307F18B42DDF825C750396BC208C33AFC12EED45C9362FAA642E142E3B84DAA9B528174D7821984517318CE82286115DC430A28B18467411C3882E6218D1450C23BA88614417318CE82286115DC430A28B18467411C384E6866218D1450C23BA8861423614C3601735D212384CAFDDCDC8113FB3D47D204C0440BBF935C863C3B0DC1C8271F200ECE62B2839740155F77D86428D0DB5D13528174D78219833DB882D33DB882D33DB882D33DB882D33DB882D33DB882D33DB882D33DB882D33DB882D33DB882D33DB882D33DB882D33DB882D33DB882D4308A1D832841C8A2D33DB882DB1457B69B9EAA0774F2B23C72E32CB7C0584D6ABA0150E82AC0FC0F2DE008CD25ED813FF8A92191E54998EA1B0633F6ACFED42B968C28BD0B9EF27E6F7F989F97D7E627E9F9F98DFE727E6F7F989F97D7E627E9F9F98DFE727E6F7F989F97D7E627E9F9F98DFE727E6F7F989F97D7E627E9F9F98DFE727E6C76A3FA0C5F021BDC3271939EF0B668DF84168FC0AB4D15E90BBFA600945057E627ED8C72EA264F00CAAF28FA030A605B54BAC280F9DFB7E62FEE66EEE62CDDDDCC59ABBB98B357773176BEEE62ED6DCCD5DACB99BBB58733777B1E66EEE62CDDD83E58B15CDDDDCC59ABBB98B357773176BEEE62ED6DCCD5D2CD412BA8B35777317C306EB68D97980DEE39F3272F00CB30E5D00C1E607ADA9136443172C311D306EF3C23EC38312D99F51D5ED40E160136A4F57A15C34E18560AEEFE78E5CDFCF1DB9BE9F3B727D3F77E4FA7EEEC8F5FDDC91EBFBB923D7F77347AEEFE78E5CDFCF1DB9BE9F3B727D3F77E4FA7EEEC8F5FDDC91EBFBB923D7F77347AEEFE78E8C5D5C4B8BAE85DEA84F18397C9259763708D7DB40DB7C11E4B9976089FB1246B907F63DAD2839FE29AA7A0FA2D0B817B5924A948B26BC10CCF6217217F6217217F6217217F6217217F6217217F6217217F6217217F6217217F6217217F6217217F6217217F6217217F6217217F6217217A19653EBD7D887C85DD887C85D6077ECA2C5D3486FEF4146E61F61D67D9F8150761AB4FD6E90179C8525EF7318652ED84DC750D2ED4095E98F283CBF07B5491528174D782198DD41724AEE20392577909C923B484EC91D24A7E40E92537207C929B983E494DC41724AEE20392577909C923B484EC91D24A7E40E92537207C929B983E494DC41724AD8CA2A5ABE799F5E5D0B230D1F322B7018848AA3A0A94E807CF4042C49C761343A61BFEA40C9CE03A8F234A2F0720D6A93CA502E9AF04230B78F90EB6B1F21D7D73E42AEAF7D845C5FFB08B9BEF611727DED23E4FADA47C8F5B58F90EB6B1F21D7D73E42AEAF7D845C5FFB08B9BEF611727DED23E4FADA47C8F5B58F90EBC3AEADA0E5720DBDC6BD8C8C696196C60682D40E5A9A03E426072CBA8F7E603C047BC77E940C36A1EAFC1E141EDB89DAE852948B26BC10CCDE7172B0DE7172B0DE7172B0DE7172B0DE7172B0DE7172B0DE7172B0A1311B06967AC7C9C17AC7C9C17AC793CAFF63B9779C1CAC779C1CAC779C1CAC779C1CAC779C1CAC779C1C2C76CE0E5A2AABE85D5CCB48ED07CC5AD408424A3368E7F6813CBD0596C47D30F635C15EB41725C13A54EDD885C2B515A8EDB4A05C34E18560764C901B774C901B774C901B774C901B774C901B774C901B0FD992BC558E0972E38E0972E38E0972E38E0972E38E0972E38E0972E38E0972E38E0972E38E0972E38E0972E3D84E0B2D4965F44A2A19B9C4CAACE81A1082B5A0C5D4819C55074BDD6E18A7D6C27E6E174A4E57A12AA90285D1A5A8ADDB8A72D1841782B9409C5AFCC95B0522FF2C0A44FE591488FCB32810F9675120F2CFA240E49F4581C83F8B02917F160522FF2C0A44FE591488FCB32810F9675120F2CFA240E49F4581C83F8B02917F16D8C27768A97D97DED26D8C549732AB7207089632D0A694833CA71C96CB6530CACA601F2E4549FE7654EDB6A070FB56D43EFB36CA45135E844E7F91BF303FAEFD27CB8F67FF974B9824C87F283CBDE2A448FDFFAD3E49E8132561A4E75FB91E598BF0A947D6227CEA91B5089F7A642DC2A71E598BF0A947D6227CEA91B5089F7A642DC2A71E598BF0A947D6227CEA91B5089F7A642DC2A71E598BF0A947D6227CEA91B5089F7A642DC2A71E598BF0A947D6227CEA91B5089F7A642DC2A71E598BF0A947D6227CEA91B5089F7A642DC2A71E598BF0A947D6227CEA91B5089F7A642DC2A71E598BF0A947D6227CEA91B508A7BA20464AA4444AA4444AA4444AA4444AA4444AA4444AA4444AA444CABF4EF91F874F6BF5]]>
          </MeshData>
        </MeshImport>
        <MeshExpression VertexColors="255">
          <Expression>
<![CDATA[//V : current vertex
//N : current normal (turn off AutoNormals when modifying normals)
//C : current color (turn on VertexColors)
//TexCoord : current texture coordinate (turn on HasTexCoords)
C.R = V.Y;
C.B = -V.Y;]]>
          </Expression>
        </MeshExpression>
      </Producers>
    </Mesh>
    <Model Name="ModelSphere">
      <Comment>
<![CDATA[This is a multiline comment.
To see if it's working, even though I'm not sur how to spawn that in ZGameEditor.]]>
      </Comment>
      <OnRender>
        <UseMaterial Material="MaterialTest"/>
        <RenderMesh Mesh="MeshSphere"/>
      </OnRender>
    </Model>
    <Group Comment="Empty group"/>
  </Content>
</ZApplication>
